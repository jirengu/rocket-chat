{"version":3,"sources":["meteor://ðŸ’»app/packages/rocketchat:ui-admin/publications/adminRooms.js"],"names":["Meteor","publish","filter","types","limit","options","userId","ready","RocketChat","authz","hasPermission","_","isArray","fields","name","t","cl","u","usernames","muted","ro","topic","msgs","archived","sort","trim","length","models","Rooms","findByNameContainingAndTypes","findByTypes","findByNameContaining"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAOC,OAAP,CAAe,YAAf,EAA6B,UAASC,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+B;AAC3D,KAAIC,OAAJ;;AACA,KAAI,CAAC,KAAKC,MAAV,EAAkB;AACjB,SAAO,KAAKC,KAAL,EAAP;AACA;;AACD,KAAIC,WAAWC,KAAX,CAAiBC,aAAjB,CAA+B,KAAKJ,MAApC,EAA4C,0BAA5C,MAA4E,IAAhF,EAAsF;AACrF,SAAO,KAAKC,KAAL,EAAP;AACA;;AACD,KAAI,CAACI,EAAEC,OAAF,CAAUT,KAAV,CAAL,EAAuB;AACtBA,UAAQ,EAAR;AACA;;AACDE,WAAU;AACTQ,UAAQ;AACPC,SAAM,CADC;AAEPC,MAAG,CAFI;AAGPC,OAAI,CAHG;AAIPC,MAAG,CAJI;AAKPC,cAAW,CALJ;AAMPC,UAAO,CANA;AAOPC,OAAI,CAPG;AAQP,cAAS,CARF;AASPC,UAAO,CATA;AAUPC,SAAM,CAVC;AAWPC,aAAU;AAXH,GADC;AAcTnB,SAAOA,KAdE;AAeToB,QAAM;AACL,cAAS,CAAC,CADL;AAELV,SAAM;AAFD;AAfG,EAAV;AAoBAZ,UAASS,EAAEc,IAAF,CAAOvB,MAAP,CAAT;;AACA,KAAIA,UAAUC,MAAMuB,MAApB,EAA4B;AAC3B;AACA,SAAOlB,WAAWmB,MAAX,CAAkBC,KAAlB,CAAwBC,4BAAxB,CAAqD3B,MAArD,EAA6DC,KAA7D,EAAoEE,OAApE,CAAP;AACA,EAHD,MAGO,IAAIF,MAAMuB,MAAV,EAAkB;AACxB;AACA,SAAOlB,WAAWmB,MAAX,CAAkBC,KAAlB,CAAwBE,WAAxB,CAAoC3B,KAApC,EAA2CE,OAA3C,CAAP;AACA,EAHM,MAGA;AACN;AACA,SAAOG,WAAWmB,MAAX,CAAkBC,KAAlB,CAAwBG,oBAAxB,CAA6C7B,MAA7C,EAAqDG,OAArD,CAAP;AACA;AACD,CA1CD,6F","file":"/packages/rocketchat_ui-admin.js","sourcesContent":["Meteor.publish('adminRooms', function(filter, types, limit) {\n\tvar options;\n\tif (!this.userId) {\n\t\treturn this.ready();\n\t}\n\tif (RocketChat.authz.hasPermission(this.userId, 'view-room-administration') !== true) {\n\t\treturn this.ready();\n\t}\n\tif (!_.isArray(types)) {\n\t\ttypes = [];\n\t}\n\toptions = {\n\t\tfields: {\n\t\t\tname: 1,\n\t\t\tt: 1,\n\t\t\tcl: 1,\n\t\t\tu: 1,\n\t\t\tusernames: 1,\n\t\t\tmuted: 1,\n\t\t\tro: 1,\n\t\t\tdefault: 1,\n\t\t\ttopic: 1,\n\t\t\tmsgs: 1,\n\t\t\tarchived: 1\n\t\t},\n\t\tlimit: limit,\n\t\tsort: {\n\t\t\tdefault: -1,\n\t\t\tname: 1\n\t\t}\n\t};\n\tfilter = _.trim(filter);\n\tif (filter && types.length) {\n\t\t// CACHE: can we stop using publications here?\n\t\treturn RocketChat.models.Rooms.findByNameContainingAndTypes(filter, types, options);\n\t} else if (types.length) {\n\t\t// CACHE: can we stop using publications here?\n\t\treturn RocketChat.models.Rooms.findByTypes(types, options);\n\t} else {\n\t\t// CACHE: can we stop using publications here?\n\t\treturn RocketChat.models.Rooms.findByNameContaining(filter, options);\n\t}\n});\n"]}